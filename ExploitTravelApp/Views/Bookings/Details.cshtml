@model ExploitTravelApp.Models.Bookings.Booking

@using Microsoft.AspNetCore.Identity
@inject UserManager<ExploitTravelApp.Models.Common.Authentication.ApplicationUser> UserManager
@{
    var user = await UserManager.FindByNameAsync(Context.User.Identity.Name);
    var userId = (await UserManager.FindByNameAsync(Context.User.Identity.Name)).Id;
}

@{
    Layout = "~/Views/Shared/_LayoutBackpanel.cshtml";
}

@{
    ViewData["Title"] = "Details";
}

@{
    double totalExpenseOfHotel = 0;
    double totalExpenseOfSight = 0;
    double totalExpenseOfActivity = 0;
    double totalExpenseOfPackage = 0;
}

<div class="container-fluid mt-5">
    <div class="row justify-content-center">
        <div class="col-lg-12 mt-5">
            <div class="card">
                <div class="card-header card-header-primary">
                    <div class="row">
                        <div class="col m-auto">
                            <h4 class="card-title my-0 ml-3">Booking Details</h4>
                        </div>
                        <div class="col">
                            <div class="text-right">
                                <a href="javascript: history.go(-1)" class="btn btn-sm btn-neutral">Back to list <i class="fa fa-undo ml-1 fa-sm"></i></a>
                            </div>
                        </div>
                    </div>
                </div>

                <div class="card-body pb-4">
                    <div class="row">
                        <div class="col-md-3 mb-2">
                            <label class="control-label d-block">Visitor</label>
                            <input class="form-control bg-white" disabled value="@Model.Visitor.Name" />
                        </div>
                        <div class="col-md-3 mb-2">
                            <label class="control-label">Contact Number</label>
                            <input class="form-control bg-white" disabled value="@Model.ContactNumber" />
                        </div>
                        <div class="col-md-3 mb-2">
                            <label class="control-label d-block">From Date</label>
                            <input class="form-control bg-white" disabled value="@String.Format("{0:d-M-yyyy}", Model.FromDate)" />
                        </div>
                        <div class="col-md-3 mb-2">
                            <label class="control-label d-block">To Date</label>
                            <input class="form-control bg-white" disabled value="@String.Format("{0:d-M-yyyy}", Model.ToDate)" />
                        </div>
                        <div class="col-md-3 mb-2">
                            <label class="control-label">Number of People</label>
                            <input class="form-control bg-white" disabled value="@Model.NumberOfPeople" />
                        </div>
                        <div class="col-md-3 mb-2">
                            <label class="control-label d-block">Demographic Group</label>
                            <input class="form-control bg-white" disabled value="@Model.ExploitPackage.Bundle.Name" />
                        </div>
                        <div class="col-md-3 mb-2">
                            <label class="control-label d-block">Tour Theme</label>
                            <input class="form-control bg-white" disabled value="@Model.ExploitPackage.ExploitPackageCategory.Name" />
                        </div>
                        <div class="col-md-3 mb-2">
                            <label class="control-label d-block">Location</label>
                            <input class="form-control bg-white" disabled value="@Model.ExploitPackage.Location.Name" />
                        </div>
                        <div class="col-md-3 mb-2">
                            <label class="control-label">Agent</label>
                            <input class="form-control bg-white" disabled value="@Model.ExploitPackage.Agent.Name" />
                        </div>
                        <div class="col-md-3 mb-2">
                            <label class="control-label">Package Name</label>
                            <input class="form-control bg-white" disabled value="@Model.ExploitPackage.Name" />
                        </div>
                        <div class="col-md-3 mb-2">
                            <label class="control-label">Place</label>
                            <input class="form-control bg-white" disabled value="@Model.ExploitPackage.PlaceName" />
                        </div>
                        <div class="col-md-3 mb-2">
                            <label class="control-label">Default Price</label>
                            <input class="form-control bg-white" disabled value="@Model.ExploitPackage.DefaultPrice" />
                        </div>
                        <div class="col-md-3 mb-2">
                            <label class="control-label">Nights</label>
                            <input class="form-control bg-white" disabled value="@Model.ExploitPackage.Nights" />
                        </div>
                        <div class="col-md-3 mb-2">
                            <label class="control-label">Days</label>
                            <input class="form-control bg-white" disabled value="@Model.ExploitPackage.Days" />
                        </div>
                        <div class="col-md-12">
                            <label class="control-label">Note</label>
                            <textarea class="form-control bg-white" disabled rows="4">@Model.ExploitPackage.Note</textarea>
                        </div>
                    </div>
                </div>
            </div>

            <div id="HotelDiv">
                @foreach (var hotel in Model.ExploitPackage.Hotels)
                {
                    if (hotel.Id == ViewBag.HotelId)
                    {
                        <div class="HotelIndividual">
                            <div class="card mt-5">
                                <div class="card-header card-header-success">
                                    <div class="row">
                                        <div class="col m-auto">
                                            <h4 class="card-title my-0 ml-3">Hotel</h4>
                                        </div>
                                    </div>
                                </div>
                                <div class="card-body">
                                    <div class="row">
                                        <div class="col-lg-12">
                                            <input class="form-control NameAddressAndDescription bg-transparent" disabled value="@hotel.NameAddressAndDescription" placeholder="Name, Address and Description" />
                                        </div>
                                        <div class="col-lg-3">
                                            <div class="form-check">
                                                <label class="form-check-label">
                                                    <input type="checkbox" class="HasSwimmingPool form-check-input" disabled @(Convert.ToBoolean(hotel.HasSwimmingPool) == true ? "checked='checked'" : string.Empty) />Swimming Pool
                                                    <span class=form-check-sign><span class=check></span></span>
                                                </label>
                                            </div>
                                        </div>
                                        <div class="col-lg-3">
                                            <div class="form-check">
                                                <label class="form-check-label">
                                                    <input type="checkbox" class="HasRoofTop form-check-input" disabled @(Convert.ToBoolean(hotel.HasRoofTop) == true ? "checked='checked'" : string.Empty) />Roof Top                                                    <span class=form-check-sign><span class=check></span></span>
                                                </label>
                                            </div>
                                        </div>
                                        <div class="col-lg-3">
                                            <div class="form-check">
                                                <label class="form-check-label">
                                                    <input type="checkbox" class="HasTwentyFourSevenSupport form-check-input" disabled @(Convert.ToBoolean(hotel.HasTwentyFourSevenSupport) == true ? "checked='checked'" : string.Empty) />Support 24/7                                                    <span class=form-check-sign><span class=check></span></span>
                                                </label>
                                            </div>
                                        </div>
                                        <div class="col-lg-3">
                                            <div class="form-check">
                                                <label class="form-check-label">
                                                    <input type="checkbox" class="HasGymnasium form-check-input" disabled @(Convert.ToBoolean(hotel.HasGymnasium) == true ? "checked='checked'" : string.Empty) />Gymnasium                                                  <span class=form-check-sign><span class=check></span></span>
                                                </label>
                                            </div>
                                        </div>

                                        <div class="col-lg-3">
                                            <div class="form-check">
                                                <label class="form-check-label">
                                                    <input type="checkbox" class="HasMusicLounge form-check-input" disabled @(Convert.ToBoolean(hotel.HasMusicLounge) == true ? "checked='checked'" : string.Empty) />Music Lounge                                                  <span class=form-check-sign><span class=check></span></span>
                                                </label>
                                            </div>
                                        </div>

                                        <div class="col-lg-3">
                                            <div class="form-check">
                                                <label class="form-check-label">
                                                    <input type="checkbox" class="HasBar form-check-input" disabled @(Convert.ToBoolean(hotel.HasBar) == true ? "checked='checked'" : string.Empty) />Bar                                   <span class=form-check-sign><span class=check></span></span>
                                                </label>
                                            </div>
                                        </div>

                                        <div class="col-lg-3">
                                            <div class="form-check">
                                                <label class="form-check-label">
                                                    <input type="checkbox" class="HasKidsCorner form-check-input" disabled @(Convert.ToBoolean(hotel.HasKidsCorner) == true ? "checked='checked'" : string.Empty) />Kids Corner                                   <span class=form-check-sign><span class=check></span></span>
                                                </label>
                                            </div>
                                        </div>


                                        <div class="col-lg-3">
                                            <div class="form-check">
                                                <label class="form-check-label">
                                                    <input type="checkbox" class="IsPetFriendly form-check-input" disabled @(Convert.ToBoolean(hotel.IsPetFriendly) == true ? "checked='checked'" : string.Empty) />Pet Friendly                                   <span class=form-check-sign><span class=check></span></span>
                                                </label>
                                            </div>
                                        </div>

                                        <div class="col-lg-3">
                                            <div class="form-check">
                                                <label class="form-check-label">
                                                    <input type="checkbox" class="HasFreeWifi form-check-input" disabled @(Convert.ToBoolean(hotel.HasFreeWifi) == true ? "checked='checked'" : string.Empty) />Free Wi-Fi                               <span class=form-check-sign><span class=check></span></span>
                                                </label>
                                            </div>
                                        </div>

                                        <div class="col-lg-3">
                                            <div class="form-check">
                                                <label class="form-check-label">
                                                    <input type="checkbox" class="HasLaundry form-check-input" disabled @(Convert.ToBoolean(hotel.HasLaundry) == true ? "checked='checked'" : string.Empty) />Laundry                              <span class=form-check-sign><span class=check></span></span>
                                                </label>
                                            </div>
                                        </div>

                                        <div class="col-lg-3">
                                            <div class="form-check">
                                                <label class="form-check-label">
                                                    <input type="checkbox" class="HasRestaurant form-check-input" disabled @(Convert.ToBoolean(hotel.HasRestaurant) == true ? "checked='checked'" : string.Empty) />Restaurant                              <span class=form-check-sign><span class=check></span></span>
                                                </label>
                                            </div>
                                        </div>

                                        @if (ViewBag.RoomCategory == 1)
                                        {
                                            @* Room 1 *@
                                            <div class="col-lg-12 title my-3"><h4>Room Specification</h4></div>

                                            <div class="col-lg-3 mt-3">
                                                <label class="control-label d-block">Room Type</label>
                                                <input class="form-control bg-white" value="@hotel.Room1Type" disabled>
                                            </div>

                                            <div class="col-lg-3 mt-3">
                                                <label class="control-label">Fixed Expense</label>
                                                <input class="Room1FixedExpense form-control" disabled value="@hotel.Room1FixedExpense" placeholder="Value" step=any type="number">
                                            </div>

                                            <div class="col-lg-3 mt-3">
                                                <label class="control-label">Variable Expense</label>
                                                <input class="Room1VariableExpense form-control" disabled value="@hotel.Room1VariableExpense" placeholder="Value" step=any type="number">
                                            </div>

                                            <div class="col-lg-3 mt-3">
                                                <label class="control-label">Room Capacity</label>
                                                <input class="Room1Capacity form-control" disabled value="@hotel.Room1Capacity" placeholder="Value" step=any type="number">
                                            </div>

                                            <div class="col-lg-3">
                                                <div class="form-check">
                                                    <label class="form-check-label">
                                                        <input type="checkbox" class="Room1HasBalcony form-check-input" disabled @(Convert.ToBoolean(hotel.Room1HasBalcony) == true ? "checked='checked'" : string.Empty) />Balcony                              <span class=form-check-sign><span class=check></span></span>
                                                    </label>
                                                </div>
                                            </div>

                                            <div class="col-lg-3">
                                                <div class="form-check">
                                                    <label class="form-check-label">
                                                        <input type="checkbox" class="Room1HasWardrobe form-check-input" disabled @(Convert.ToBoolean(hotel.Room1HasWardrobe) == true ? "checked='checked'" : string.Empty) />Wardrobe                              <span class=form-check-sign><span class=check></span></span>
                                                    </label>
                                                </div>
                                            </div>

                                            <div class="col-lg-3">
                                                <div class="form-check">
                                                    <label class="form-check-label">
                                                        <input type="checkbox" class="Room1HasRoomService form-check-input" disabled @(Convert.ToBoolean(hotel.Room1HasRoomService) == true ? "checked='checked'" : string.Empty) />Room Service                              <span class=form-check-sign><span class=check></span></span>
                                                    </label>
                                                </div>
                                            </div>

                                            <div class="col-lg-3">
                                                <div class="form-check">
                                                    <label class="form-check-label">
                                                        <input type="checkbox" class="Room1HasTV form-check-input" disabled @(Convert.ToBoolean(hotel.Room1HasTV) == true ? "checked='checked'" : string.Empty) />TV                              <span class=form-check-sign><span class=check></span></span>
                                                    </label>
                                                </div>
                                            </div>

                                            <div class="col-lg-3">
                                                <div class="form-check">
                                                    <label class="form-check-label">
                                                        <input type="checkbox" class="Room1HasMarbleFloor form-check-input" disabled @(Convert.ToBoolean(hotel.Room1HasMarbleFloor) == true ? "checked='checked'" : string.Empty) />Marble Floor                          <span class=form-check-sign><span class=check></span></span>
                                                    </label>
                                                </div>
                                            </div>

                                            <div class="col-lg-3">
                                                <div class="form-check">
                                                    <label class="form-check-label">
                                                        <input type="checkbox" class="Room1HasSittingChair form-check-input" disabled @(Convert.ToBoolean(hotel.Room1HasSittingChair) == true ? "checked='checked'" : string.Empty) />Sitting Chair                          <span class=form-check-sign><span class=check></span></span>
                                                    </label>
                                                </div>
                                            </div>


                                            <div class="col-lg-3">
                                                <div class="form-check">
                                                    <label class="form-check-label">
                                                        <input type="checkbox" class="Room1HasTelephone form-check-input" disabled @(Convert.ToBoolean(hotel.Room1HasTelephone) == true ? "checked='checked'" : string.Empty) />Telephone                    <span class=form-check-sign><span class=check></span></span>
                                                    </label>
                                                </div>
                                            </div>

                                            <div class="col-lg-3">
                                                <div class="form-check">
                                                    <label class="form-check-label">
                                                        <input type="checkbox" class="Room1HasDeluxBed form-check-input" disabled @(Convert.ToBoolean(hotel.Room1HasDeluxBed) == true ? "checked='checked'" : string.Empty) />Deluxe Bed                    <span class=form-check-sign><span class=check></span></span>
                                                    </label>
                                                </div>
                                            </div>

                                            int numberOfPeople = Model.NumberOfPeople;
                                            double fixedExpense = 0;
                                            double variableExpense = 0;
                                            int capacity = 0;
                                            double totalFixedExpense = 0;
                                            double totalVariableExpense = 0;
                                            double totalExpense = 0;

                                            if (hotel.Room1FixedExpense != null)
                                            {
                                                fixedExpense = Convert.ToDouble(hotel.Room1FixedExpense);
                                            }

                                            if (hotel.Room1VariableExpense != null)
                                            {
                                                variableExpense = Convert.ToDouble(hotel.Room1VariableExpense);
                                            }

                                            if (hotel.Room1Capacity != null)
                                            {
                                                capacity = Convert.ToInt32(hotel.Room1Capacity);
                                            }

                                            if (numberOfPeople > capacity)
                                            {
                                                int quotient = numberOfPeople / capacity;
                                                int remainder = numberOfPeople % capacity;
                                                if (remainder > 0)
                                                {
                                                    remainder = 1;
                                                }

                                                int summation = quotient + remainder;

                                                totalFixedExpense = fixedExpense * summation;
                                            }
                                            else
                                            {
                                                totalFixedExpense = fixedExpense;
                                            }

                                            totalVariableExpense = variableExpense * numberOfPeople;

                                            totalExpense = totalFixedExpense + totalVariableExpense;

                                            totalExpenseOfHotel = totalExpense;

                                            <div class="col-lg-3 mt-3">
                                                <label class="control-label d-block">Estimated Amount</label>
                                                <input class="form-control bg-white" value="@totalExpense" disabled>
                                            </div>
                                        }

                                        @if (ViewBag.RoomCategory == 2)
                                        {
                                            @* Room 2 *@
                                            <div class="col-lg-12 title my-3"><h4>Room Specification</h4></div>

                                            <div class="col-lg-3 mt-3">
                                                <label class="control-label d-block">Room Type</label>
                                                <input class="form-control bg-white" value="@hotel.Room2Type" disabled>
                                            </div>

                                            <div class="col-lg-3 mt-3">
                                                <label class="control-label">Fixed Expense</label>
                                                <input class="Room2FixedExpense form-control bg-transparent" disabled value="@hotel.Room2FixedExpense" placeholder="Value" step=any type="number">
                                            </div>

                                            <div class="col-lg-3 mt-3">
                                                <label class="control-label">Variable Expense</label>
                                                <input class="Room2VariableExpense form-control bg-transparent" disabled value="@hotel.Room2VariableExpense" placeholder="Value" step=any type="number">
                                            </div>

                                            <div class="col-lg-3 mt-3">
                                                <label class="control-label">Room Capacity</label>
                                                <input class="Room2Capacity form-control bg-transparent" disabled value="@hotel.Room2Capacity" placeholder="Value" step=any type="number">
                                            </div>

                                            <div class="col-lg-3">
                                                <div class="form-check">
                                                    <label class="form-check-label">
                                                        <input type="checkbox" class="Room2HasBalcony form-check-input" disabled @(Convert.ToBoolean(hotel.Room2HasBalcony) == true ? "checked='checked'" : string.Empty) />Balcony                              <span class=form-check-sign><span class=check></span></span>
                                                    </label>
                                                </div>
                                            </div>

                                            <div class="col-lg-3">
                                                <div class="form-check">
                                                    <label class="form-check-label">
                                                        <input type="checkbox" class="Room2HasWardrobe form-check-input" disabled @(Convert.ToBoolean(hotel.Room2HasWardrobe) == true ? "checked='checked'" : string.Empty) />Wardrobe                              <span class=form-check-sign><span class=check></span></span>
                                                    </label>
                                                </div>
                                            </div>

                                            <div class="col-lg-3">
                                                <div class="form-check">
                                                    <label class="form-check-label">
                                                        <input type="checkbox" class="Room2HasRoomService form-check-input" disabled @(Convert.ToBoolean(hotel.Room2HasRoomService) == true ? "checked='checked'" : string.Empty) />Room Service                              <span class=form-check-sign><span class=check></span></span>
                                                    </label>
                                                </div>
                                            </div>

                                            <div class="col-lg-3">
                                                <div class="form-check">
                                                    <label class="form-check-label">
                                                        <input type="checkbox" class="Room2HasTV form-check-input" disabled @(Convert.ToBoolean(hotel.Room2HasTV) == true ? "checked='checked'" : string.Empty) />TV                              <span class=form-check-sign><span class=check></span></span>
                                                    </label>
                                                </div>
                                            </div>

                                            <div class="col-lg-3">
                                                <div class="form-check">
                                                    <label class="form-check-label">
                                                        <input type="checkbox" class="Room2HasMarbleFloor form-check-input" disabled @(Convert.ToBoolean(hotel.Room2HasMarbleFloor) == true ? "checked='checked'" : string.Empty) />Marble Floor                          <span class=form-check-sign><span class=check></span></span>
                                                    </label>
                                                </div>
                                            </div>

                                            <div class="col-lg-3">
                                                <div class="form-check">
                                                    <label class="form-check-label">
                                                        <input type="checkbox" class="Room2HasSittingChair form-check-input" disabled @(Convert.ToBoolean(hotel.Room2HasSittingChair) == true ? "checked='checked'" : string.Empty) />Sitting Chair                          <span class=form-check-sign><span class=check></span></span>
                                                    </label>
                                                </div>
                                            </div>

                                            <div class="col-lg-3">
                                                <div class="form-check">
                                                    <label class="form-check-label">
                                                        <input type="checkbox" class="Room2HasTelephone form-check-input" disabled @(Convert.ToBoolean(hotel.Room2HasTelephone) == true ? "checked='checked'" : string.Empty) />Telephone                    <span class=form-check-sign><span class=check></span></span>
                                                    </label>
                                                </div>
                                            </div>

                                            <div class="col-lg-3">
                                                <div class="form-check">
                                                    <label class="form-check-label">
                                                        <input type="checkbox" class="Room2HasDeluxBed form-check-input" disabled @(Convert.ToBoolean(hotel.Room2HasDeluxBed) == true ? "checked='checked'" : string.Empty) />Deluxe Bed                    <span class=form-check-sign><span class=check></span></span>
                                                    </label>
                                                </div>
                                            </div>

                                            int numberOfPeople = Model.NumberOfPeople;
                                            double fixedExpense = 0;
                                            double variableExpense = 0;
                                            int capacity = 0;
                                            double totalFixedExpense = 0;
                                            double totalVariableExpense = 0;
                                            double totalExpense = 0;

                                            if (hotel.Room2FixedExpense != null)
                                            {
                                                fixedExpense = Convert.ToDouble(hotel.Room2FixedExpense);
                                            }

                                            if (hotel.Room2VariableExpense != null)
                                            {
                                                variableExpense = Convert.ToDouble(hotel.Room2VariableExpense);
                                            }

                                            if (hotel.Room2Capacity != null)
                                            {
                                                capacity = Convert.ToInt32(hotel.Room2Capacity);
                                            }

                                            if (numberOfPeople > capacity)
                                            {
                                                int quotient = numberOfPeople / capacity;
                                                int remainder = numberOfPeople % capacity;
                                                if (remainder > 0)
                                                {
                                                    remainder = 1;
                                                }

                                                int summation = quotient + remainder;

                                                totalFixedExpense = fixedExpense * summation;
                                            }
                                            else
                                            {
                                                totalFixedExpense = fixedExpense;
                                            }

                                            totalVariableExpense = variableExpense * numberOfPeople;

                                            totalExpense = totalFixedExpense + totalVariableExpense;

                                            totalExpenseOfHotel = totalExpense;

                                            <div class="col-lg-3 mt-3">
                                                <label class="control-label d-block">Estimated Amount</label>
                                                <input class="form-control bg-white" value="@totalExpense" disabled>
                                            </div>
                                        }

                                        @if (ViewBag.RoomCategory == 3)
                                        {
                                            @* Room 3 *@
                                            <div class="col-lg-12 title my-3"><h4>Room Specification</h4></div>

                                            <div class="col-lg-3 mt-3">
                                                <label class="control-label d-block">Room Type</label>
                                                <input class="form-control bg-white" value="@hotel.Room3Type" disabled>
                                            </div>

                                            <div class="col-lg-3 mt-3">
                                                <label class="control-label">Fixed Expense</label>
                                                <input class="Room3FixedExpense form-control bg-transparent" disabled value="@hotel.Room3FixedExpense" placeholder="Value" step=any type="number">
                                            </div>

                                            <div class="col-lg-3 mt-3">
                                                <label class="control-label">Variable Expense</label>
                                                <input class="Room3VariableExpense form-control bg-transparent" disabled value="@hotel.Room3VariableExpense" placeholder="Value" step=any type="number">
                                            </div>

                                            <div class="col-lg-3 mt-3">
                                                <label class="control-label">Room Capacity</label>
                                                <input class="Room3Capacity form-control bg-transparent" value="@hotel.Room3Capacity" disabled placeholder="Value" step=any type="number">
                                            </div>

                                            <div class="col-lg-3">
                                                <div class="form-check">
                                                    <label class="form-check-label">
                                                        <input type="checkbox" class="Room3HasBalcony form-check-input" disabled @(Convert.ToBoolean(hotel.Room3HasBalcony) == true ? "checked='checked'" : string.Empty) />Balcony                              <span class=form-check-sign><span class=check></span></span>
                                                    </label>
                                                </div>
                                            </div>

                                            <div class="col-lg-3">
                                                <div class="form-check">
                                                    <label class="form-check-label">
                                                        <input type="checkbox" class="Room3HasWardrobe form-check-input" disabled @(Convert.ToBoolean(hotel.Room3HasWardrobe) == true ? "checked='checked'" : string.Empty) />Wardrobe                              <span class=form-check-sign><span class=check></span></span>
                                                    </label>
                                                </div>
                                            </div>

                                            <div class="col-lg-3">
                                                <div class="form-check">
                                                    <label class="form-check-label">
                                                        <input type="checkbox" class="Room3HasRoomService form-check-input" disabled @(Convert.ToBoolean(hotel.Room3HasRoomService) == true ? "checked='checked'" : string.Empty) />Room Service                              <span class=form-check-sign><span class=check></span></span>
                                                    </label>
                                                </div>
                                            </div>

                                            <div class="col-lg-3">
                                                <div class="form-check">
                                                    <label class="form-check-label">
                                                        <input type="checkbox" class="Room3HasTV form-check-input" disabled @(Convert.ToBoolean(hotel.Room3HasTV) == true ? "checked='checked'" : string.Empty) />TV                              <span class=form-check-sign><span class=check></span></span>
                                                    </label>
                                                </div>
                                            </div>

                                            <div class="col-lg-3">
                                                <div class="form-check">
                                                    <label class="form-check-label">
                                                        <input type="checkbox" class="Room3HasMarbleFloor form-check-input" disabled @(Convert.ToBoolean(hotel.Room3HasMarbleFloor) == true ? "checked='checked'" : string.Empty) />Marble Floor                          <span class=form-check-sign><span class=check></span></span>
                                                    </label>
                                                </div>
                                            </div>

                                            <div class="col-lg-3">
                                                <div class="form-check">
                                                    <label class="form-check-label">
                                                        <input type="checkbox" class="Room3HasSittingChair form-check-input" disabled @(Convert.ToBoolean(hotel.Room3HasSittingChair) == true ? "checked='checked'" : string.Empty) />Sitting Chair                          <span class=form-check-sign><span class=check></span></span>
                                                    </label>
                                                </div>
                                            </div>

                                            <div class="col-lg-3">
                                                <div class="form-check">
                                                    <label class="form-check-label">
                                                        <input type="checkbox" class="Room3HasTelephone form-check-input" disabled @(Convert.ToBoolean(hotel.Room3HasTelephone) == true ? "checked='checked'" : string.Empty) />Telephone                    <span class=form-check-sign><span class=check></span></span>
                                                    </label>
                                                </div>
                                            </div>

                                            <div class="col-lg-3">
                                                <div class="form-check">
                                                    <label class="form-check-label">
                                                        <input type="checkbox" class="Room3HasDeluxBed form-check-input" disabled @(Convert.ToBoolean(hotel.Room3HasDeluxBed) == true ? "checked='checked'" : string.Empty) />Deluxe Bed                    <span class=form-check-sign><span class=check></span></span>
                                                    </label>
                                                </div>
                                            </div>

                                            int numberOfPeople = Model.NumberOfPeople;
                                            double fixedExpense = 0;
                                            double variableExpense = 0;
                                            int capacity = 0;
                                            double totalFixedExpense = 0;
                                            double totalVariableExpense = 0;
                                            double totalExpense = 0;

                                            if (hotel.Room3FixedExpense != null)
                                            {
                                                fixedExpense = Convert.ToDouble(hotel.Room3FixedExpense);
                                            }

                                            if (hotel.Room3VariableExpense != null)
                                            {
                                                variableExpense = Convert.ToDouble(hotel.Room3VariableExpense);
                                            }

                                            if (hotel.Room3Capacity != null)
                                            {
                                                capacity = Convert.ToInt32(hotel.Room3Capacity);
                                            }

                                            if (numberOfPeople > capacity)
                                            {
                                                int quotient = numberOfPeople / capacity;
                                                int remainder = numberOfPeople % capacity;
                                                if (remainder > 0)
                                                {
                                                    remainder = 1;
                                                }

                                                int summation = quotient + remainder;

                                                totalFixedExpense = fixedExpense * summation;
                                            }
                                            else
                                            {
                                                totalFixedExpense = fixedExpense;
                                            }

                                            totalVariableExpense = variableExpense * numberOfPeople;

                                            totalExpense = totalFixedExpense + totalVariableExpense;

                                            totalExpenseOfHotel = totalExpense;

                                            <div class="col-lg-3 mt-3">
                                                <label class="control-label d-block">Estimated Amount</label>
                                                <input class="form-control bg-white" value="@totalExpense" disabled>
                                            </div>
                                        }
                                    </div>
                                </div>
                            </div>
                        </div>
                    }
                }
            </div>

            <div id="SightDiv">
                @foreach (var sight in Model.ExploitPackage.Sights)
                {
                    if (sight.IsIncluded)
                    {
                        <div class="SightIndividual">
                            <div class="card mt-5">
                                <div class="card-header card-header-rose">
                                    <div class="row">
                                        <div class="col m-auto">
                                            <h4 class="card-title my-0 ml-3">Sight</h4>
                                        </div>
                                    </div>
                                </div>
                                <div class="card-body">
                                    <div class="row">
                                        <div class="col-lg-6">
                                            <label>Name</label>
                                            <input class="form-control bg-white" value="@sight.Name" disabled />
                                        </div>

                                        <div class="col-lg-6 mt-3">
                                            <div class="form-check">
                                                <label class="form-check-label">
                                                    <input type="checkbox" class="SightIsIncluded form-check-input" disabled @(Convert.ToBoolean(sight.IsIncluded) == true ? "checked='checked'" : string.Empty) />Included with package
                                                    <span class=form-check-sign><span class=check></span></span>
                                                </label>
                                            </div>
                                        </div>

                                        <div class="col-lg-3 mt-3">
                                            <label>Fixed Expense</label>
                                            <input type="number" step="any" class="form-control bg-white" value="@sight.FixedExpense" disabled />
                                        </div>

                                        <div class="col-lg-3 mt-3">
                                            <label>Variable Expense</label>
                                            <input type="number" step="any" class="form-control bg-white" value="@sight.VariableExpense" disabled />
                                        </div>

                                        <div class="col-lg-3 mt-3">
                                            <label>Capacity</label>
                                            <input type="number" step="any" class="form-control bg-white" value="@sight.Capacity" disabled />
                                        </div>

                                    </div>
                                </div>
                            </div>
                        </div>
                    }
                    else
                    {
                        foreach (var sight1 in ViewBag.SightIds)
                        {
                            if (sight1 == sight.Id)
                            {
                                <div class="SightIndividual">
                                    <div class="card mt-5">
                                        <div class="card-header card-header-rose">
                                            <div class="row">
                                                <div class="col m-auto">
                                                    <h4 class="card-title my-0 ml-3">Sight</h4>
                                                </div>
                                            </div>
                                        </div>
                                        <div class="card-body">
                                            <div class="row">
                                                <div class="col-lg-6">
                                                    <label>Name</label>
                                                    <input class="form-control bg-white" value="@sight.Name" disabled />
                                                </div>

                                                <div class="col-lg-6 mt-3">
                                                    <div class="form-check">
                                                        <label class="form-check-label">
                                                            <input type="checkbox" class="form-check-input" disabled checked />Taken
                                                            <span class=form-check-sign><span class=check></span></span>
                                                        </label>
                                                    </div>
                                                </div>

                                                <div class="col-lg-3 mt-3">
                                                    <label>Fixed Expense</label>
                                                    <input type="number" step="any" class="form-control bg-white" value="@sight.FixedExpense" disabled />
                                                </div>

                                                <div class="col-lg-3 mt-3">
                                                    <label>Variable Expense</label>
                                                    <input type="number" step="any" class="form-control bg-white" value="@sight.VariableExpense" disabled />
                                                </div>

                                                <div class="col-lg-3 mt-3">
                                                    <label>Capacity</label>
                                                    <input type="number" step="any" class="form-control bg-white" value="@sight.Capacity" disabled />
                                                </div>

                                                @{
                                                    int numberOfPeople = Model.NumberOfPeople;
                                                    double fixedExpense = 0;
                                                    double variableExpense = 0;
                                                    int capacity = 0;
                                                    double totalFixedExpense = 0;
                                                    double totalVariableExpense = 0;
                                                    double totalExpense = 0;

                                                    if (sight.FixedExpense != null)
                                                    {
                                                        fixedExpense = Convert.ToDouble(sight.FixedExpense);
                                                    }

                                                    if (sight.VariableExpense != null)
                                                    {
                                                        variableExpense = Convert.ToDouble(sight.VariableExpense);
                                                    }

                                                    if (sight.Capacity != null)
                                                    {
                                                        capacity = Convert.ToInt32(sight.Capacity);
                                                    }

                                                    if (numberOfPeople > capacity)
                                                    {
                                                        int quotient = numberOfPeople / capacity;
                                                        int remainder = numberOfPeople % capacity;
                                                        if (remainder > 0)
                                                        {
                                                            remainder = 1;
                                                        }

                                                        int summation = quotient + remainder;

                                                        totalFixedExpense = fixedExpense * summation;
                                                    }
                                                    else
                                                    {
                                                        totalFixedExpense = fixedExpense;
                                                    }

                                                    totalVariableExpense = variableExpense * numberOfPeople;

                                                    totalExpense = totalFixedExpense + totalVariableExpense;

                                                    totalExpenseOfSight += totalExpense;
                                                }

                                                <div class="col-lg-3 mt-3">
                                                    <label>Estimated Amount</label>
                                                    <input type="number" step="any" class="form-control bg-white" value="@totalExpense" disabled />
                                                </div>

                                            </div>
                                        </div>
                                    </div>
                                </div>
                            }
                        }
                    }
                }
            </div>

            <div id="ActivityDiv">
                @foreach (var activity in Model.ExploitPackage.Activities)
                {
                    if (activity.IsIncluded)
                    {
                        <div class="ActivityIndividual">
                            <div class="card mt-5">
                                <div class="card-header card-header-info">
                                    <div class="row">
                                        <div class="col m-auto">
                                            <h4 class="card-title my-0 ml-3">Activity</h4>
                                        </div>
                                    </div>
                                </div>
                                <div class="card-body">
                                    <div class="row">
                                        <div class="col-lg-6">
                                            <label>Name</label>
                                            <input class="form-control bg-white" value="@activity.Name" disabled />
                                        </div>

                                        <div class="col-lg-6 mt-3">
                                            <div class="form-check">
                                                <label class="form-check-label">
                                                    <input type="checkbox" class="ActivityIsIncluded form-check-input" disabled @(Convert.ToBoolean(activity.IsIncluded) == true ? "checked='checked'" : string.Empty) />Included with package
                                                    <span class=form-check-sign><span class=check></span></span>
                                                </label>
                                            </div>
                                        </div>

                                        <div class="col-lg-3 mt-3">
                                            <label>Fixed Expense</label>
                                            <input type="number" step="any" class="form-control bg-white" disabled value="@activity.FixedExpense" />
                                        </div>

                                        <div class="col-lg-3 mt-3">
                                            <label>Variable Expense</label>
                                            <input type="number" step="any" class="form-control bg-white" disabled value="@activity.VariableExpense" />
                                        </div>

                                        <div class="col-lg-3 mt-3">
                                            <label>Capacity</label>
                                            <input type="number" class="form-control bg-white" disabled value="@activity.Capacity" />
                                        </div>

                                    </div>
                                </div>
                            </div>
                        </div>
                    }
                    else
                    {
                        foreach (var activity1 in ViewBag.ActivityIds)
                        {
                            if (activity1 == activity.Id)
                            {
                                <div class="ActivityIndividual">
                                    <div class="card mt-5">
                                        <div class="card-header card-header-info">
                                            <div class="row">
                                                <div class="col m-auto">
                                                    <h4 class="card-title my-0 ml-3">Activity</h4>
                                                </div>
                                            </div>
                                        </div>
                                        <div class="card-body">
                                            <div class="row">
                                                <div class="col-lg-6">
                                                    <label>Name</label>
                                                    <input class="form-control bg-white" value="@activity.Name" disabled />
                                                </div>

                                                <div class="col-lg-6 mt-3">
                                                    <div class="form-check">
                                                        <label class="form-check-label">
                                                            <input type="checkbox" class="form-check-input" disabled checked />Taken
                                                            <span class=form-check-sign><span class=check></span></span>
                                                        </label>
                                                    </div>
                                                </div>

                                                <div class="col-lg-3 mt-3">
                                                    <label>Fixed Expense</label>
                                                    <input type="number" step="any" class="form-control bg-white" disabled value="@activity.FixedExpense" />
                                                </div>

                                                <div class="col-lg-3 mt-3">
                                                    <label>Variable Expense</label>
                                                    <input type="number" step="any" class="form-control bg-white" disabled value="@activity.VariableExpense" />
                                                </div>

                                                <div class="col-lg-3 mt-3">
                                                    <label>Capacity</label>
                                                    <input type="number" class="form-control bg-white" disabled value="@activity.Capacity" />
                                                </div>

                                                @{
                                                    int numberOfPeople = Model.NumberOfPeople;
                                                    double fixedExpense = 0;
                                                    double variableExpense = 0;
                                                    int capacity = 0;
                                                    double totalFixedExpense = 0;
                                                    double totalVariableExpense = 0;
                                                    double totalExpense = 0;

                                                    if (activity.FixedExpense != null)
                                                    {
                                                        fixedExpense = Convert.ToDouble(activity.FixedExpense);
                                                    }

                                                    if (activity.VariableExpense != null)
                                                    {
                                                        variableExpense = Convert.ToDouble(activity.VariableExpense);
                                                    }

                                                    if (activity.Capacity != null)
                                                    {
                                                        capacity = Convert.ToInt32(activity.Capacity);
                                                    }

                                                    if (numberOfPeople > capacity)
                                                    {
                                                        int quotient = numberOfPeople / capacity;
                                                        int remainder = numberOfPeople % capacity;
                                                        if (remainder > 0)
                                                        {
                                                            remainder = 1;
                                                        }

                                                        int summation = quotient + remainder;

                                                        totalFixedExpense = fixedExpense * summation;
                                                    }
                                                    else
                                                    {
                                                        totalFixedExpense = fixedExpense;
                                                    }

                                                    totalVariableExpense = variableExpense * numberOfPeople;

                                                    totalExpense = totalFixedExpense + totalVariableExpense;

                                                    totalExpenseOfActivity += totalExpense;
                                                }

                                                <div class="col-lg-3 mt-3">
                                                    <label>Estimated Amount</label>
                                                    <input type="number" step="any" class="form-control bg-white" value="@totalExpense" disabled />
                                                </div>

                                            </div>
                                        </div>
                                    </div>
                                </div>
                            }
                        }
                    }
                }
            </div>

            <div id="TravelItineraryDiv">
                @{
                    int count = 0;
                }
                @foreach (var travelItinerary in Model.ExploitPackage.TravelItineraries)
                {
                    count++;
                    <div class="TravelItineraryIndividual">
                        <div class="card mt-5">
                            <div class="card-header card-header-danger">
                                <div class="row">
                                    <div class="col m-auto">
                                        <h4 class="card-title my-0 ml-3">Itinerary Day @count</h4>
                                    </div>
                                </div>
                            </div>
                            <div class="card-body">
                                <div class="row">
                                    <div class="col-lg-3">
                                        <label>Departure From</label>
                                        <input type="text" class="form-control TravelItineraryDepartureFrom bg-transparent" disabled placeholder="Departure from" value="@travelItinerary.DepartureFrom" />
                                    </div>

                                    <div class="col-lg-3">
                                        <label>Arrival At</label>
                                        <input type="text" class="form-control TravelItineraryArrivalAt bg-transparent" disabled placeholder="Arriaval At" value="@travelItinerary.ArrivalAt" />
                                    </div>

                                    <div class="col-lg-3">
                                        <label>Transfer Type</label>
                                        <input type="text" class="form-control TravelItineraryTransferType bg-transparent" disabled placeholder="Transfer Type" value="@travelItinerary.TransferType" />
                                    </div>

                                    <div class="col-lg-3">
                                        <label>Check In At</label>
                                        <input type="text" class="form-control TravelItineraryCheckInAt bg-transparent" disabled placeholder="Check In At" value="@travelItinerary.CheckInAt" />
                                    </div>

                                    <div class="col-lg-3 mt-3">
                                        <label>Meal Description</label>
                                        <input type="text" class="form-control TravelItineraryMealDescription bg-transparent" disabled placeholder="Meal Description" value="@travelItinerary.MealDescription" />
                                    </div>

                                    <div class="col-lg-3 mt-3">
                                        <label>Sight Seeing</label>
                                        <input type="text" class="form-control TravelItinerarySightSeeing bg-transparent" disabled placeholder="Sight Seeing" value="@travelItinerary.SightSeeing" />
                                    </div>

                                    <div class="col-lg-3 mt-3">
                                        <label>Activity</label>
                                        <input type="text" class="form-control TravelItineraryActivity bg-transparent" disabled placeholder="Activity" value="@travelItinerary.Activity" />
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                }
            </div>

            <div>
                <div class="">
                    <div class="card mt-5">
                        <div class="card-header card-header-warning">
                            <div class="row">
                                <div class="col m-auto">
                                    <h4 class="card-title my-0 ml-3">Total Estimated Amount of Package</h4>
                                </div>
                            </div>
                        </div>
                        <div class="card-body">
                            <div class="row">
                                <div class="col-lg-12">
                                    <label>Amount</label>
                                    @{
                                        double defaultPrice = Model.ExploitPackage.DefaultPrice;
                                        totalExpenseOfPackage = defaultPrice + totalExpenseOfHotel + totalExpenseOfSight + totalExpenseOfActivity;
                                    }
                                    <input type="text" class="form-control bg-transparent" disabled value="@totalExpenseOfPackage" />
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            @if (Model.Status == 0)
            {
                @if (await UserManager.IsInRoleAsync(user, "Admin"))
                {
                    <div>
                        <div class="">
                            <div class="card mt-5">
                                <div class="card-header card-header-primary">
                                    <div class="row">
                                        <div class="col m-auto">
                                            <h4 class="card-title my-0 ml-3">Confirmation</h4>
                                        </div>
                                    </div>
                                </div>
                                <div class="card-body">
                                    <div class="row">
                                        <div class="col-lg-12">
                                            <div class="text-center d-flex justify-content-center">
                                                <form asp-controller="Bookings" asp-action="Confirm" method="post">
                                                    <input type="hidden" asp-for="Id" />
                                                    <input type="hidden" asp-for="EstimatedAmount" value="@totalExpenseOfPackage" />
                                                    <input type="submit" value="Confirm" class="btn btn-success" />
                                                </form>

                                                <form asp-controller="Bookings" asp-action="Cancel" method="post">
                                                    <input type="hidden" asp-for="Id" />
                                                    <input type="submit" value="Cancel" class="btn btn-danger" />
                                                </form>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                }
            }

            <div class="container">
                <div class="row">
                    <div class="col-lg-12">
                        <div class="text-center">
                            @if (Model.Status == 1)
                            {
                                <button class="btn btn-success btn-lg">Confirmed</button>
                            }

                            @if (Model.Status == 404)
                            {
                                <button class="btn btn-danger btn-lg">Cancelled</button>
                            }
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>


@section Scripts {


    <script>
        $('.confirmation-btn').confirm({
            icon: 'far fa-sign-in-alt',
            title: 'Approve?',
            theme: 'material',
            animation: 'zoom',
            closeAnimation: 'zoom',
            backgroundDismiss: true,
            closeIcon: true,
            type: 'red',
            buttons: {

                Yes: {
                    text: 'yes',
                    btnClass: 'btn-rose',
                    action: function () {
                        location.href = this.$target.attr('href');
                    },
                },
                no: {
                    text: 'no',
                    action: function () {
                        //
                    }
                }
            }

        });
    </script>
}